nodes:
  - node_id: lossless-pitch#1
    title: "无损变调 #1"
    inputs_from:
      - handle: file
        value: /oomol-driver/oomol-storage/tuanzi_test.mp3
        from_flow:
          - input_handle: file
      - handle: pitch
        value: 10
        from_flow:
          - input_handle: pitch
      - handle: fp
        value: false
        from_flow:
          - input_handle: fp
      - handle: tp
        value: false
        from_flow:
          - input_handle: tp
    task: self::lossless-pitch-block
  - node_id: url-download-to-path#1
    title: "Url Download To Path #1"
    inputs_from:
      - handle: url
        from_node:
          - node_id: lossless-pitch#1
            output_handle: download_url
    task: read-file::url-download-to-path
  - node_id: audio_preview#1
    title: "Audio preview #1"
    inputs_from:
      - handle: audio_path
        from_node:
          - node_id: url-download-to-path#1
            output_handle: address
    task: oomol-preview::audio_preview
forward_previews:
  - lossless-pitch#1
title: Lossless pitch
description: "Complete workflow for lossless pitch adjustment with preview -
  processes audio files to change pitch while preserving quality and providing
  instant audio preview"
outputs_def:
  - handle: address
    json_schema:
      type: string
      ui:widget: file
    nullable: false
    description: "File path of the pitch-adjusted audio with preview capability"
    executor_name: nodejs
outputs_from:
  - handle: address
    from_node:
      - node_id: url-download-to-path#1
        output_handle: address
inputs_def:
  - handle: file
    description: "Audio file to be pitch-adjusted"
    json_schema:
      type: string
      ui:widget: file
    nullable: false
    executor_name: nodejs
  - handle: pitch
    description: "Pitch adjustment in semitones (-10 to +10)"
    json_schema:
      type: integer
      minimum: -10
      maximum: 10
      default: 0
      nullable: false
    value: 10
    nullable: false
    executor_name: nodejs
  - handle: fp
    description: "Enable formant preservation to maintain voice characteristics"
    json_schema:
      type: boolean
      default: true
      nullable: false
    value: false
    nullable: false
    executor_name: nodejs
  - handle: tp
    description: "Enable timing preservation to maintain original tempo"
    json_schema:
      type: boolean
      default: true
      nullable: false
    value: false
    nullable: false
    executor_name: nodejs
